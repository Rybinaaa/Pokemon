{"ast":null,"code":"var _jsxFileName = \"/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/src/components/listItem/ListItem.js\";\nimport { Component } from \"react\";\nimport Cervice from \"../cervice/Cervice\";\nimport Item from \"../item/Item\";\nimport './ListItem.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.cervice = new Cervice();\n    this.state = {\n      loading: true,\n      items: [],\n      offset: 0\n    };\n\n    this.onItemsLoaded = newItems => {\n      this.setState(_ref => {\n        let {\n          items,\n          loading\n        } = _ref;\n        return {\n          items: newItems,\n          loading: false\n        };\n      });\n    };\n\n    this.onRequest = offset => {\n      this.cervice.getAllItems(offset).then(res => this.onItemsLoaded(res));\n    };\n\n    this.createItems = items => {\n      const elements = items.map(item => {\n        return /*#__PURE__*/_jsxDEV(Item, {\n          name: item.name,\n          imgShiny: item.imgShiny,\n          imgDef: item.imgDef,\n          onClick: this.props.onClick\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 20\n        }, this);\n      });\n      return elements;\n    };\n\n    this.onLoadMore = () => {\n      this.setState(_ref2 => {\n        let {\n          offset\n        } = _ref2;\n\n        offset: offset + 6;\n      }, this.onRequest());\n    };\n  }\n\n  componentDidMount() {\n    this.onRequest(this.state.offset);\n  }\n\n  render() {\n    const {\n      items,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: loading ? null : this.createItems(items)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: this.onLoadMore,\n        children: \"Load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default ListItem;","map":{"version":3,"sources":["/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/src/components/listItem/ListItem.js"],"names":["Component","Cervice","Item","ListItem","constructor","props","cervice","state","loading","items","offset","onItemsLoaded","newItems","setState","onRequest","getAllItems","then","res","createItems","elements","map","item","name","imgShiny","imgDef","onClick","id","onLoadMore","componentDidMount","render"],"mappings":";AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAO,gBAAP;;;AAGA,MAAMC,QAAN,SAAuBH,SAAvB,CAAiC;AAC7BI,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AADc,SAIlBC,OAJkB,GAIR,IAAIL,OAAJ,EAJQ;AAAA,SAMlBM,KANkB,GAMV;AACJC,MAAAA,OAAO,EAAE,IADL;AAEJC,MAAAA,KAAK,EAAE,EAFH;AAGJC,MAAAA,MAAM,EAAE;AAHJ,KANU;;AAAA,SAYlBC,aAZkB,GAYDC,QAAD,IAAc;AAC1B,WAAKC,QAAL,CAAc;AAAA,YAAC;AAACJ,UAAAA,KAAD;AAAQD,UAAAA;AAAR,SAAD;AAAA,eAAuB;AACjCC,UAAAA,KAAK,EAAEG,QAD0B;AAEjCJ,UAAAA,OAAO,EAAE;AAFwB,SAAvB;AAAA,OAAd;AAIH,KAjBiB;;AAAA,SAmBlBM,SAnBkB,GAmBLJ,MAAD,IAAY;AACpB,WAAKJ,OAAL,CACCS,WADD,CACaL,MADb,EAECM,IAFD,CAEMC,GAAG,IAAI,KAAKN,aAAL,CAAmBM,GAAnB,CAFb;AAGH,KAvBiB;;AAAA,SA6BlBC,WA7BkB,GA6BHT,KAAD,IAAW;AACrB,YAAMU,QAAQ,GAAGV,KAAK,CAACW,GAAN,CAAUC,IAAI,IAAI;AAC/B,4BAAO,QAAC,IAAD;AAAsB,UAAA,IAAI,EAAIA,IAAI,CAACC,IAAnC;AAAyC,UAAA,QAAQ,EAAID,IAAI,CAACE,QAA1D;AAAoE,UAAA,MAAM,EAAIF,IAAI,CAACG,MAAnF;AAA2F,UAAA,OAAO,EAAE,KAAKnB,KAAL,CAAWoB;AAA/G,WAAaJ,IAAI,CAACK,EAAlB;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH,OAFgB,CAAjB;AAGA,aAAOP,QAAP;AACH,KAlCiB;;AAAA,SAoClBQ,UApCkB,GAoCL,MAAM;AACf,WAAKd,QAAL,CAAc,SACV;AAAA,YADW;AAACH,UAAAA;AAAD,SACX;;AACIA,QAAAA,MAAM,EAAEA,MAAM,GAAG,CAAT;AACX,OAHL,EAGO,KAAKI,SAAL,EAHP;AAKH,KA1CiB;AAEjB;;AAuBDc,EAAAA,iBAAiB,GAAE;AACf,SAAKd,SAAL,CAAe,KAAKP,KAAL,CAAWG,MAA1B;AACH;;AAkBDmB,EAAAA,MAAM,GAAG;AACL,UAAM;AAACpB,MAAAA,KAAD;AAAQD,MAAAA;AAAR,QAAmB,KAAKD,KAA9B;AACA,wBACA;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,kBACCC,OAAO,GAAE,IAAF,GAAU,KAAKU,WAAL,CAAiBT,KAAjB;AADlB;AAAA;AAAA;AAAA;AAAA,cADJ,eAII;AAAQ,QAAA,SAAS,EAAC,KAAlB;AAAwB,QAAA,OAAO,EAAE,KAAKkB,UAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAQH;;AAxD4B;;AA4DjC,eAAexB,QAAf","sourcesContent":["import { Component } from \"react\";\nimport Cervice from \"../cervice/Cervice\";\nimport Item from \"../item/Item\";\nimport './ListItem.css'\n\n\nclass ListItem extends Component {\n    constructor(props){\n        super(props)\n    }\n\n    cervice = new Cervice\n\n    state = {\n        loading: true,\n        items: [],\n        offset: 0,\n    }\n\n    onItemsLoaded = (newItems) => {\n        this.setState(({items, loading}) => ({\n            items: newItems,\n            loading: false,\n        }))\n    }\n\n    onRequest = (offset) => {\n        this.cervice\n        .getAllItems(offset)\n        .then(res => this.onItemsLoaded(res))\n    }\n\n    componentDidMount(){\n        this.onRequest(this.state.offset)\n    }\n\n    createItems = (items) => {\n        const elements = items.map(item => {\n            return <Item key = {item.id} name = {item.name} imgShiny = {item.imgShiny} imgDef = {item.imgDef} onClick={this.props.onClick}/>\n        })\n        return elements\n    }\n\n    onLoadMore = () => {\n        this.setState(({offset}) => \n            {\n                offset: offset + 6\n            }, this.onRequest())\n    \n    }\n        \n\n    render() {\n        const {items, loading} = this.state\n        return(\n        <main> \n            <div className=\"container\">\n            {loading? null :  this.createItems(items)}\n            </div>\n            <button className=\"btn\" onClick={this.onLoadMore}>Load more</button>\n        </main>    \n        )\n    }\n}\n\n\nexport default ListItem"]},"metadata":{},"sourceType":"module"}