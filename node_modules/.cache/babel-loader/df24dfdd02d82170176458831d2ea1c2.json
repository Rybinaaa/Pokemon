{"ast":null,"code":"import _asyncToGenerator from\"/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _regeneratorRuntime from\"/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/node_modules/@babel/runtime/regenerator/index.js\";var Cervice=/*#__PURE__*/_createClass(function Cervice(){var _this=this;_classCallCheck(this,Cervice);this._adress='https://pokeapi.co/api/v2/';this._offset=0;this.getResource=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:res=_context.sent;if(res.ok){_context.next=5;break;}throw new Error(\"status: \".concat(res.status));case 5:_context.next=7;return res.json();case 7:return _context.abrupt(\"return\",_context.sent);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.getAllItems=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var offset,res,urls,items,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:offset=_args3.length>0&&_args3[0]!==undefined?_args3[0]:_this._offset;_context3.next=3;return _this.getResource(\"\".concat(_this._adress,\"pokemon/?limit=6&offset=\").concat(offset,\"/\"));case 3:res=_context3.sent;urls=res.results.map(function(item){return item.url;});_context3.t0=Promise;_context3.next=8;return urls.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.getResource(url);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());case 8:_context3.t1=_context3.sent;items=_context3.t0.all.call(_context3.t0,_context3.t1);_context3.next=12;return items;case 12:res=_context3.sent.map(function(item){return _this.transformItem(item);});return _context3.abrupt(\"return\",Promise.all(res));case 14:case\"end\":return _context3.stop();}}},_callee3);}));this.transformItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item){var desc,infoItem;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.getResource(\"\".concat(_this._adress,\"characteristic/\").concat(item.id,\"/\"));case 2:desc=_context4.sent;// console.log(item)\ninfoItem={name:item.name,imgDef:item.sprites.front_default,imgShiny:item.sprites.front_shiny,id:item.id,description:desc.descriptions[7].description};return _context4.abrupt(\"return\",infoItem);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}();this.getItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.getResource(\"\".concat(_this._adress,\"pokemon/\").concat(id,\"/\"));case 2:res=_context5.sent;return _context5.abrupt(\"return\",_this.transformItem(res));case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();});export default Cervice;","map":{"version":3,"sources":["/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/src/components/cervice/Cervice.js"],"names":["Cervice","_adress","_offset","getResource","url","fetch","res","ok","Error","status","json","getAllItems","offset","urls","results","map","item","Promise","items","all","transformItem","id","desc","infoItem","name","imgDef","sprites","front_default","imgShiny","front_shiny","description","descriptions","getItem"],"mappings":"4oBAAMA,CAAAA,O,gGAEFC,O,CAAU,4B,MACVC,O,CAAU,C,MAEVC,W,0FAAc,iBAAOC,GAAP,gJACMC,CAAAA,KAAK,CAAED,GAAF,CADX,QACNE,GADM,kBAGLA,GAAG,CAACC,EAHC,8BAIA,IAAIC,CAAAA,KAAJ,mBAAqBF,GAAG,CAACG,MAAzB,EAJA,8BAOGH,CAAAA,GAAG,CAACI,IAAJ,EAPH,6G,oEAUdC,W,sEAAc,mLAAOC,MAAP,kDAAgB,KAAI,CAACV,OAArB,wBACM,CAAA,KAAI,CAACC,WAAL,WAAoB,KAAI,CAACF,OAAzB,oCAA2DW,MAA3D,MADN,QACNN,GADM,gBAEJO,IAFI,CAEGP,GAAG,CAACQ,OAAJ,CAAYC,GAAZ,CAAgB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACZ,GAAT,EAApB,CAFH,cAGIa,OAHJ,wBAGsBJ,CAAAA,IAAI,CAACE,GAAL,2FAAS,kBAAOX,GAAP,6IAAqB,CAAA,KAAI,CAACD,WAAL,CAAiBC,GAAjB,CAArB,iHAAT,iEAHtB,oCAGJc,KAHI,cAGYC,GAHZ,yDAKGD,CAAAA,KALH,SAKVZ,GALU,gBAKUS,GALV,CAKc,SAAAC,IAAI,QAAI,CAAA,KAAI,CAACI,aAAL,CAAmBJ,IAAnB,CAAJ,EALlB,mCAMHC,OAAO,CAACE,GAAR,CAAYb,GAAZ,CANG,2D,QASdc,a,2FAAgB,kBAAOJ,IAAP,+JACO,CAAA,KAAI,CAACb,WAAL,WAAoB,KAAI,CAACF,OAAzB,2BAAkDe,IAAI,CAACK,EAAvD,MADP,QACNC,IADM,gBAEZ;AACIC,QAHQ,CAGG,CACXC,IAAI,CAAER,IAAI,CAACQ,IADA,CAEXC,MAAM,CAAET,IAAI,CAACU,OAAL,CAAaC,aAFV,CAGXC,QAAQ,CAAEZ,IAAI,CAACU,OAAL,CAAaG,WAHZ,CAIXR,EAAE,CAAEL,IAAI,CAACK,EAJE,CAKXS,WAAW,CAAER,IAAI,CAACS,YAAL,CAAkB,CAAlB,EAAqBD,WALvB,CAHH,kCAULP,QAVK,0D,sEAahBS,O,2FAAU,kBAAOX,EAAP,qJACU,CAAA,KAAI,CAAClB,WAAL,WAAoB,KAAI,CAACF,OAAzB,oBAA2CoB,EAA3C,MADV,QACFf,GADE,iDAEC,KAAI,CAACc,aAAL,CAAmBd,GAAnB,CAFD,0D,oEAQd,cAAeN,CAAAA,OAAf","sourcesContent":["class Cervice {\n\n    _adress = 'https://pokeapi.co/api/v2/'\n    _offset = 0\n\n    getResource = async (url) => {\n        let res = await fetch (url)\n\n        if (!res.ok){\n            throw new Error(`status: ${res.status}`)\n        }\n\n        return await res.json()\n    }\n\n    getAllItems = async (offset = this._offset) => {\n        let res = await this.getResource(`${this._adress}pokemon/?limit=6&offset=${offset}/`)\n        const urls = res.results.map(item => item.url)\n        const items = Promise.all(await urls.map(async (url) => await this.getResource(url)))\n        // console.log(items)\n        res = (await items).map(item => this.transformItem(item))\n        return Promise.all(res)\n    }\n\n    transformItem = async (item) => {\n        const desc = await this.getResource(`${this._adress}characteristic/${item.id}/`)\n        // console.log(item)\n        let infoItem = {\n            name: item.name,\n            imgDef: item.sprites.front_default,\n            imgShiny: item.sprites.front_shiny,\n            id: item.id,\n            description: desc.descriptions[7].description,\n        }\n        return infoItem\n    }\n\n    getItem = async (id) => {\n        let res = await this.getResource(`${this._adress}pokemon/${id}/`)\n        return this.transformItem(res)\n    } \n    \n}\n\n\nexport default Cervice;"]},"metadata":{},"sourceType":"module"}