{"ast":null,"code":"class Cervice {\n  constructor() {\n    var _this = this;\n\n    this._adress = 'https://pokeapi.co/api/v2/';\n    this._offset = 0;\n\n    this.getResource = async url => {\n      let res = await fetch(url);\n\n      if (!res.ok) {\n        throw new Error(`status: ${res.status}`);\n      }\n\n      return await res.json();\n    };\n\n    this.getAllItems = async function () {\n      let offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this._offset;\n      let res = await _this.getResource(`${_this._adress}pokemon/?limit=6&offset=${offset}/`);\n      const urls = res.results.map(item => item.url);\n      const items = Promise.all(await urls.map(async url => await _this.getResource(url))); // console.log(items)\n\n      res = (await items).map(item => _this.transformItem(item));\n      return Promise.all(res);\n    };\n\n    this.transformItem = async item => {\n      const desc = await this.getResource(`${this._adress}characteristic/${item.id}/`); // console.log(item)\n\n      let infoItem = {\n        name: item.name,\n        imgDef: item.sprites.front_default,\n        imgShiny: item.sprites.front_shiny,\n        id: item.id,\n        description: desc.descriptions[7].description\n      };\n      return infoItem;\n    };\n\n    this.getItem = async id => {\n      let res = await this.getResource(`${this._adress}pokemon/${id}/`);\n      return this.transformItem(res);\n    };\n  }\n\n}\n\nexport default Cervice;","map":{"version":3,"sources":["/Users/rybina/Desktop/learn-front/learn-react/react-pr/module-2-total/my-app/src/components/cervice/Cervice.js"],"names":["Cervice","_adress","_offset","getResource","url","res","fetch","ok","Error","status","json","getAllItems","offset","urls","results","map","item","items","Promise","all","transformItem","desc","id","infoItem","name","imgDef","sprites","front_default","imgShiny","front_shiny","description","descriptions","getItem"],"mappings":"AAAA,MAAMA,OAAN,CAAc;AAAA;AAAA;;AAAA,SAEVC,OAFU,GAEA,4BAFA;AAAA,SAGVC,OAHU,GAGA,CAHA;;AAAA,SAKVC,WALU,GAKI,MAAOC,GAAP,IAAe;AACzB,UAAIC,GAAG,GAAG,MAAMC,KAAK,CAAEF,GAAF,CAArB;;AAEA,UAAI,CAACC,GAAG,CAACE,EAAT,EAAY;AACR,cAAM,IAAIC,KAAJ,CAAW,WAAUH,GAAG,CAACI,MAAO,EAAhC,CAAN;AACH;;AAED,aAAO,MAAMJ,GAAG,CAACK,IAAJ,EAAb;AACH,KAbS;;AAAA,SAeVC,WAfU,GAeI,kBAAiC;AAAA,UAA1BC,MAA0B,uEAAjB,KAAI,CAACV,OAAY;AAC3C,UAAIG,GAAG,GAAG,MAAM,KAAI,CAACF,WAAL,CAAkB,GAAE,KAAI,CAACF,OAAQ,2BAA0BW,MAAO,GAAlE,CAAhB;AACA,YAAMC,IAAI,GAAGR,GAAG,CAACS,OAAJ,CAAYC,GAAZ,CAAgBC,IAAI,IAAIA,IAAI,CAACZ,GAA7B,CAAb;AACA,YAAMa,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAY,MAAMN,IAAI,CAACE,GAAL,CAAS,MAAOX,GAAP,IAAe,MAAM,KAAI,CAACD,WAAL,CAAiBC,GAAjB,CAA9B,CAAlB,CAAd,CAH2C,CAI3C;;AACAC,MAAAA,GAAG,GAAG,CAAC,MAAMY,KAAP,EAAcF,GAAd,CAAkBC,IAAI,IAAI,KAAI,CAACI,aAAL,CAAmBJ,IAAnB,CAA1B,CAAN;AACA,aAAOE,OAAO,CAACC,GAAR,CAAYd,GAAZ,CAAP;AACH,KAtBS;;AAAA,SAwBVe,aAxBU,GAwBM,MAAOJ,IAAP,IAAgB;AAC5B,YAAMK,IAAI,GAAG,MAAM,KAAKlB,WAAL,CAAkB,GAAE,KAAKF,OAAQ,kBAAiBe,IAAI,CAACM,EAAG,GAA1D,CAAnB,CAD4B,CAE5B;;AACA,UAAIC,QAAQ,GAAG;AACXC,QAAAA,IAAI,EAAER,IAAI,CAACQ,IADA;AAEXC,QAAAA,MAAM,EAAET,IAAI,CAACU,OAAL,CAAaC,aAFV;AAGXC,QAAAA,QAAQ,EAAEZ,IAAI,CAACU,OAAL,CAAaG,WAHZ;AAIXP,QAAAA,EAAE,EAAEN,IAAI,CAACM,EAJE;AAKXQ,QAAAA,WAAW,EAAET,IAAI,CAACU,YAAL,CAAkB,CAAlB,EAAqBD;AALvB,OAAf;AAOA,aAAOP,QAAP;AACH,KAnCS;;AAAA,SAqCVS,OArCU,GAqCA,MAAOV,EAAP,IAAc;AACpB,UAAIjB,GAAG,GAAG,MAAM,KAAKF,WAAL,CAAkB,GAAE,KAAKF,OAAQ,WAAUqB,EAAG,GAA9C,CAAhB;AACA,aAAO,KAAKF,aAAL,CAAmBf,GAAnB,CAAP;AACH,KAxCS;AAAA;;AAAA;;AA6Cd,eAAeL,OAAf","sourcesContent":["class Cervice {\n\n    _adress = 'https://pokeapi.co/api/v2/'\n    _offset = 0\n\n    getResource = async (url) => {\n        let res = await fetch (url)\n\n        if (!res.ok){\n            throw new Error(`status: ${res.status}`)\n        }\n\n        return await res.json()\n    }\n\n    getAllItems = async (offset = this._offset) => {\n        let res = await this.getResource(`${this._adress}pokemon/?limit=6&offset=${offset}/`)\n        const urls = res.results.map(item => item.url)\n        const items = Promise.all(await urls.map(async (url) => await this.getResource(url)))\n        // console.log(items)\n        res = (await items).map(item => this.transformItem(item))\n        return Promise.all(res)\n    }\n\n    transformItem = async (item) => {\n        const desc = await this.getResource(`${this._adress}characteristic/${item.id}/`)\n        // console.log(item)\n        let infoItem = {\n            name: item.name,\n            imgDef: item.sprites.front_default,\n            imgShiny: item.sprites.front_shiny,\n            id: item.id,\n            description: desc.descriptions[7].description,\n        }\n        return infoItem\n    }\n\n    getItem = async (id) => {\n        let res = await this.getResource(`${this._adress}pokemon/${id}/`)\n        return this.transformItem(res)\n    } \n    \n}\n\n\nexport default Cervice;"]},"metadata":{},"sourceType":"module"}